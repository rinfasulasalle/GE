<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/css/transexi.css">
    <title>Transferencia Exitosa</title>
</head>
<body>
    <div class="container">
        <h1>Transferencia Exitosa</h1>
        <p>Fecha y hora de la transferencia: <span id="fechaHoraTransferencia">{{fechaHoraTransferencia}}</span></p>
        <p>Monto transferido: <span id="montoTransferido">{{montoTransferido}}</span></p>
        <p>Tipo de operaci√≥n: <span id="tipoOperacion">{{tipoOperacion}}</span></p>
        <p>Cuenta Destino: <span id="cuentaDestino">{{cuentaDestino}}</span></p>
        <p>Nombre del destinatario: <span id="nombreDestinatario">{{nombreDestinatario}}</span></p>
        <p>Entidad destino: <span id="entidadDestino">{{entidadDestino}}</span></p>
        <button onclick="irAInicio()">Ir a Inicio</button>
    </div>

    <script>
        function irAInicio() {
            window.location.href = '/select-account';
        }

        document.addEventListener('DOMContentLoaded', async function () {

        const montoTrans = getCookie('monto');
        const nombreDesti = getCookie('nombreBanco');
        const tipoOpera = getCookie('tipooperacion');

        const numeroCuen = getCookie('cuenta');
        const ultimosCuatroDigitos = numeroCuen.slice(-4);
        const cadenaAsteriscos = '**** ' + ultimosCuatroDigitos;

        const entidadDes = getCookie('entidad');


        document.getElementById('fechaHoraTransferencia').innerText = new Date().toLocaleString();
        document.getElementById('montoTransferido').textContent = `S/${montoTrans}`;
        document.getElementById('nombreDestinatario').textContent = nombreDesti;
        document.getElementById('tipoOperacion').textContent = tipoOpera;
        document.getElementById('cuentaDestino').textContent = cadenaAsteriscos;
        document.getElementById('entidadDestino').textContent = entidadDes;
        });

        function getCookie(name) {
    const decodedCookie = decodeURIComponent(document.cookie);
    const cookieArray = decodedCookie.split(';');

    for (let i = 0; i < cookieArray.length; i++) {
        let cookie = cookieArray[i];

        while (cookie.charAt(0) === ' ') {
            cookie = cookie.substring(1);
        }

        if (cookie.indexOf(name + '=') === 0) {

            return cookie.substring(name.length + 1);
        }
    }

    // Si no se encuentra la cookie, devolver null
    return null;
}
    </script>
</body>
</html>
